<!DOCTYPE html>

<html>

<head>
	<meta charset="" utf-8>
	<meta http-equiv="X-UA-COMPATIBLE" content="IE=edge">
	<title>Web Project 2018</title>
	<script src="https://unpkg.com/vue/dist/vue.js">

	</script>
	<script src="https://unpkg.com/axios/dist/axios.min.js">
	</script>
	<script src="https://cdn.jsdelivr.net/npm/vue-resource@1.3.4">

	</script>

	</script>
</head>

<body>
	<div id="app">
		<h2>Liste of films</h2>
		{{films}}

		<div id="test_button">
			<button v-on:click="update_mod('https://bt3103-final-project.herokuapp.com/hello', 
			'https://bt3103-review-for-review.firebaseio.com/app_root.json')">Update Firebase</button> 
					</div>

	</div>

	<script>
		//const myObjStr = JSON.parse(JSON.stringify(5))
		new Vue({
            el: '#app',
            data : {
                films: [],
                errors: [],
							  test: [],
								databaseUrl: 'https://bt3103-review-for-review.firebaseio.com/app_root.json'
            },
            methods: {
							 update_mod(get_url, patch_url){
									this.$http.get(get_url).then(function(data){ 
									this.films = data.body; 
									console.log('Received Data: ' + data.body);
									console.log(this.films);
									}).then(function(){
										 data = JSON.stringify(this.films);
										 console.log('Sending Data: ' + data);
										 this.$http.post(patch_url, data);
										 console.log('Data Sent!');
									}) ,
									error =>{ console.log(error);}
							 }	
						}
        })
	</script>
</body>

</html>